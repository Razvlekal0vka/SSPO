https://docs.google.com/document/d/18zyuIQ72XOtONdUi743Jk_AhNalBeINXL_BDHmFbDL0/edit - ссылка на полную документацию с картинками



Данная система основана на точном точном геопозиционировании. Мы считаем, что если в аэропорту все будут знать точное местоположение всех объектов, то можно будет прокладывать точный маршрут для буксировки самолета. Для этого мы предлагаем установить радиоприемники со всенаправленным антеннам на столбы освещения в аэропорту. На сами движущиеся объекты будут установлены  радиопередатчики с несколько узконаправленымиы антенами, так, чтобы они образовывыли четверть окружности.























Этот блок антенн будет вращаться вокруг своей оси (нормали к земле), благодаря шаговым двигателям, инкодерам и редукторам мы сможем узнавать точный угол направления антенн двух плоскостях.
	Как только сигнал с антенны будет попадать на радиоприемник он будет сообщать, что был получен сигнал от такого-то передатчика, система на тягачах (объектах) получая обратную связь, зная что сигнал был получен, зная углы и высоту башен и их координаты сможет вычислять свое местоположение.




Сами радиопередатчики на движущихся объектах постоянно отправляют сигнал, но благодаря узконаправленным антема и постоянному вращению данной установки вокруг своей оси ее антенны по очереди при вращении попадают на вышки с радиопередатчиками и строя лучи от каждой вышки уточняется местоположение объекта.












При помощи программ машинного зрения мы можем определить движущиеся перед нами объекты. 
Исполняющая программа находится по адресу CV/motion_detection.py
В основе кода лежит концепция бинарного умножения пикселей(то есть нахождения разницы в значении между пикселями) в не менее 2 последовательных кадрах, получая координаты изменившихся пикселей мы можем найти как контуры объекта, так и сам объект. Обнаружив движение программа оповещает водителя и сервер с диспетчерской об обнаружении движения - Motion_detected.
Сама камера реализующая нахождение движения прикреплена спереди по направлению движения на уровне лобового стекла.


Также тягач будет оснащен лидаром и радаром(они находятся спереди, на уровне полуметра, при помощи которых мы можем сканировать пространство перед ним. Получая с этих датчиков угол и высчитав их местоположение с расстоянием мы сможем просчитать стоят ли они на пути движения как тягача, так и самого самолета. Если же по расчетам и следуя заданному маршруту система определяет, что на пути есть препятствие, то она сначала уведомляет водителя и диспетчерскую, ежели ничего не было предпринято и объект все также препятствует движению, то система может принудительно остановить тягача с самолетом.

Стоит отметить, что все датчики будут оборудованы собственной системой очистки от снега, капель воды, грязи и тп.


Эта программа также позволяет нам строить карту строить точную карту аэропорта и заносить ее в систему при помощи отредактированных фотографий. 
см /data/111.png - изображение карты
/test_data/Test_map.txt - это карта строящаяся на основе изображения
в код заранее заносятся параметры, что таким то  цветом обозначено тото

к сожалению мы не успели точно занести расположение стоянок (парковок) самолетов и пути их маневрирования из-за нехватки времени

при запуске MAIN_GAME.py вам необходимо сделать несколько кликов для запуска по странице с некоторым промежутком

Все размеры объектов можно будет брать с сервера который также можно запустить и вносить данные в него а система запущенная в аэропорту уже сама будет у него автоматически брать данные габаритов самолетов и основываясь на точной геопозиции строить маршруты маневрирования не только для буксировки самолетов но и для остальных транспортных средств



# СПиКО

<p align="center"><strong>СПиКО</strong> - это Система Позиционирования и Контроля Объектов, позволяющая прогнозировать передвижение транспортных средств и избегать их столновения друг с другом, а также с другими объектами на территории. Данная система позволяет упростить процесс буксировки ЛА, предупредить сотрудников аэропорта о его возможном столкновении близлежащими объектами.</p>

___
## **Система позиционирования объектов (СПО)**
СПО позволяет отслеживать перемещение ЛА и других транспортных 
средств в пределах аэропорта при помощи радиопередатчиков и радиоприёмников.
___

## **Система контроля объектов (СКО)**

<p>СКО позволяет при помощи машинного зрения определять движущиеся препятствия, возникающие на пути следования тягача, сцепленного с ЛА. Данная система контроля позволяет заранее оповестить о возможности столкновение.</p>
<p></p>

```py
import cv2  # импорт модуля cv2
from time import time

cap = cv2.VideoCapture(0)  # видео поток с камеры

h, w = 720, 1280
cap.set(3, w)  # установка размера окна
cap.set(4, h)

ret, frame1 = cap.read()
ret, frame2 = cap.read()
ret, frame3 = cap.read()
ret, frame4 = cap.read()

loop_time = time()
while cap.isOpened():  # метод isOpened() выводит статус видеопотока

    diff1 = cv2.absdiff(frame1,
                        frame2)  # нахождение разницы двух кадров, которая проявляется лишь при изменении одного из них, т.е. с этого момента наша программа реагирует на любое движение.

    diff2 = cv2.absdiff(frame2,
                        frame3)

    diff3 = cv2.absdiff(frame3,
                        frame4)

    res_diff = cv2.absdiff(diff1, diff2, diff3)

    gray = cv2.cvtColor(diff3, cv2.COLOR_BGR2GRAY)  # перевод кадров в черно-белую градацию

    blur = cv2.GaussianBlur(gray, (5, 5), 0)  # фильтрация лишних контуров

    _, thresh = cv2.threshold(blur, 20, 180, cv2.THRESH_BINARY)  # метод для выделения кромки объекта белым цветом

    dilated = cv2.dilate(thresh, None,
                         iterations=10)  # данный метод противоположен методу erosion(), т.е. эрозии объекта, и расширяет выделенную на предыдущем этапе область

    сontours, _ = cv2.findContours(dilated, cv2.RETR_TREE,
                                   cv2.CHAIN_APPROX_SIMPLE)  # нахождение массива контурных точек

    for contour in сontours:
        (x, y, w, h) = cv2.boundingRect(
            contour)  # преобразование массива из предыдущего этапа в кортеж из четырех координат

        # метод contourArea() по заданным contSSour точкам(кортежу), вычисляет площадь зафиксированного объекта в каждый момент времени
        print(cv2.contourArea(contour))

        if cv2.contourArea(contour) < 10000 or cv2.contourArea(contour) > 600000:  # условие при котором площадь выделенного объекта меньше N px
            continue
        # cv2.rectangle(frame1, (x, y), (x + w, y + h), (255, 0, 0), 2)  # получение прямоугольника из точек кортежа
        cv2.putText(frame1, "Motion - detected", (30, 30), cv2.FONT_HERSHEY_SIMPLEX, 1, (0, 255, 0), 2,
                    cv2.LINE_AA)  # вставляем текст

    print(f'FPS {(1 / (time() - loop_time))}')
    loop_time = time()

    cv2.drawContours(frame1, сontours, -1, (0, 255, 0), 2)
    cv2.imshow("Video", frame1)

    frame1 = frame2
    frame2 = frame3
    frame3 = frame4
    ret, frame4 = cap.read()

    if cv2.waitKey(1) == 27:
        break

cap.release()
cv2.destroyAllWindows()

```
___
## **Технологии, используемые в системе**

**Основная составляющая СПО** - _радиоприемники_, расположенные на территории аэродрома на возвышенностях (осветительные вышки, крыши невысоких зданий, вышки связи и т.д., а также _радиопередатчики_ на транспортных средствах, находящихся на территории аэропорта (за исключением ЛА).

**Основная составляющая СКО** - _лидары_ и _машинное зрение_, закрепленные на крышах буксировщиков. При помощи лидаров система определяет расстояние до любых объектов, попадающих в ее поле зрения, и  если он критично(приближается к допустимому минимуму) то высылается предупреждение.  Пи помощи машинного зрения,  регистрирующего движение осистема пределяет возникающие препятствия на  пути тягача, предупреждая сотрудника о внезапно возникшем препятствии на пути тягача.
<3


